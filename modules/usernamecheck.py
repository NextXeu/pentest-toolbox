import requests
from bs4 import BeautifulSoup

def check_username_availability(username):

    data = {'username': username}

    r = requests.post('https://analyzeid.com/username/', data=data)
    html = r.content
    soup = BeautifulSoup(html,"html.parser")
    taken = soup.find(id='taken').text.strip()
    takenlist = taken.split(" ")
    
    for index,userlink in enumerate(takenlist):
        if userlink == "profile":
            takenlist.pop(index)

        takenlists = [takenlist[:-5] for takenlist in takenlist]

    displayInfos = f"\n\n===================================\n"
    displayInfos+= f"Account for user "+username
    displayInfos+= f"\n===================================\n"

    for links in takenlists:
        displayInfos+= f"{links} [FOUND]\n"

    return displayInfos